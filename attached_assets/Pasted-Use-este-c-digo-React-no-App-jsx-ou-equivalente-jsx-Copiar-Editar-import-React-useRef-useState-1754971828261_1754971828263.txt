Use este código React no App.jsx ou equivalente:

jsx
Copiar
Editar
import React, { useRef, useState, useEffect } from "react";
import { Canvas, useFrame, useLoader } from "@react-three/fiber";
import { GLTFLoader } from "three/examples/jsm/loaders/GLTFLoader";
import { OrbitControls, Html } from "@react-three/drei";

function Avatar({ audioPlaying }) {
  const gltf = useLoader(GLTFLoader, "/avatar.glb"); // coloque seu avatar.glb na pasta public
  const mouthRef = useRef();

  // Simulação simples de animação labial pela escala da boca
  useFrame(() => {
    if (mouthRef.current) {
      // Se estiver tocando áudio, a boca "abre e fecha" suavemente
      const scale = audioPlaying ? 1 + Math.abs(Math.sin(Date.now() / 150)) * 0.3 : 1;
      mouthRef.current.scale.y = scale;
    }
  });

  // Supondo que a boca é um mesh nomeado "Mouth" no seu .glb
  // Caso contrário, adapte a referência para o mesh correto

  // Procura no gltf.scene o mesh "Mouth"
  useEffect(() => {
    gltf.scene.traverse((obj) => {
      if (obj.name === "Mouth") {
        mouthRef.current = obj;
      }
    });
  }, [gltf]);

  return <primitive object={gltf.scene} />;
}

export default function App() {
  const [audioPlaying, setAudioPlaying] = useState(false);

  // Função simulada para "falar"
  const toggleAudio = () => {
    setAudioPlaying(!audioPlaying);
  };

  return (
    <>
      <button
        onClick={toggleAudio}
        style={{
          position: "absolute",
          zIndex: 10,
          top: 20,
          left: 20,
          padding: "10px 20px",
          background: "#4caf50",
          color: "white",
          border: "none",
          borderRadius: 5,
          cursor: "pointer",
        }}
      >
        {audioPlaying ? "Parar fala" : "Falar"}
      </button>

      <Canvas
        style={{ height: "100vh", background: "transparent" }}
        camera={{ position: [0, 1.6, 3] }}
      >
        <ambientLight intensity={0.7} />
        <directionalLight position={[0, 5, 5]} intensity={1} />
        <Avatar audioPlaying={audioPlaying} />
        <OrbitControls />
      </Canvas>
    </>
  );
}