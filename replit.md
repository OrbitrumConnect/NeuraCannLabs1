# NeuroCann Lab - Plataforma Médica Inteligente

## Overview - Visão Evolutiva do Sistema

NeuroCann Lab é uma plataforma médica avançada que combina inteligência artificial, visualização de dados em tempo real e interface imersiva para análise científica de cannabis medicinal. O sistema evoluiu para ser uma ferramenta de pesquisa neural hierárquica onde:

**CONCEITO CENTRAL**: Teia neural de conhecimento que conecta estudos científicos, casos clínicos e alertas regulatórios através de IA especializada, permitindo exploração profunda e descoberta de correlações médicas.

**ARQUITETURA DE PESQUISA EVOLUTIVA**:
- **Layer 1**: Pesquisa principal fixa na teia neural (cards estáticos)
- **Layer 2**: Sub-pesquisas organizadas em dock inferior expansível
- **Layer 3**: Sistema de zoom/pan profissional (50%-200%)
- **Layer 4**: IA cruzada analisando 3 bancos simultaneamente

**FUNCIONALIDADE CORE**: Sistema de pesquisa cruzada inteligente que permite ao usuário fazer perguntas em linguagem natural e receber análises integradas de todos os dados científicos, com sugestões de aprofundamento que geram sub-pesquisas organizadas harmonicamente na interface.

## User Preferences & Evolution Goals

**Communication Style**: Simple, everyday language.

**Platform Evolution Vision**:
- Sistema deve evoluir e aprender continuamente
- Análise automática do app a cada 10 minutos durante desenvolvimento
- Foco na coerência total do sistema e experiência harmônica
- Cada funcionalidade deve se integrar naturalmente com as existentes
- Interface deve ser intuitiva: cards principais fixos, sub-pesquisas móveis
- Prioridade: organização visual harmônica que permite leitura simultânea

## Recent Changes

## ANÁLISE EVOLUTIVA DO SISTEMA (Análise 1 - 16:30)

**STATUS ATUAL**: Sistema funcionando com arquitetura híbrida otimizada

**PONTOS FORTES IDENTIFICADOS**:
✓ Teia neural fixa proporcionando estabilidade visual
✓ Dock inferior expansível criando harmonia organizacional  
✓ Sistema de pesquisa cruzada IA analisando 3 bancos simultaneamente
✓ Navegação zoom/pan profissional (50%-200%)
✓ Sub-pesquisas com handles precisos (6x6px) apenas no ícone ⋮⋮

**OPORTUNIDADES DE EVOLUÇÃO DETECTADAS**:
🔄 Sistema poderia "aprender" padrões de pesquisa do usuário
🔄 Conectividade entre cards poderia ser mais inteligente
🔄 Análise de correlações científicas em tempo real
🔄 Cache inteligente de sub-pesquisas relacionadas

**COERÊNCIA ARQUITETURAL**: 
- Frontend: React + Three.js + Interface imersiva ✓
- Backend: Express + IA cruzada + 3 bancos dados ✓ 
- UX: Teia fixa + Dock móvel + Zoom/pan ✓
- IA: Análise semântica + Sugestões contextuais ✓

**PRÓXIMA EVOLUÇÃO SUGERIDA**: 
Sistema de "memória de pesquisa" que correlaciona automaticamente sub-pesquisas baseado no histórico e cria conexões neurais visuais dinâmicas.

**EVOLUÇÃO v2.5 - INTERFACE EXPANDIDA E DADOS EXPLÍCITOS**:
✅ Card principal expandido para 480px altura com conteúdo mais legível
✅ Dados da plataforma exibidos explicitamente em grid visual
✅ Text-to-Speech otimizado - leitura limpa sem caracteres especiais
✅ Cards de dados separados (396px) com informações detalhadas
✅ Estrutura neural clara: card principal + 3 cards de dados específicos
✅ Hover effects e transições suaves em todos os elementos
✅ Layout responsivo com posicionamento absoluto inteligente
✅ Dados reais das APIs exibidos com formatação profissional

**STATUS PARA INVESTIDORES**: 
✅ Plataforma funcional v2.2 Hierárquica
✅ Sistema de árvore de conhecimento implementado
✅ Fluxo completo: Inserção → Processamento → Conexões → Aprimoramento
✅ Interface profissional pronta para demo
✅ Documento de apresentação INVESTOR_PRESENTATION.md atualizado

**SISTEMA v3.0 - SUBMISSION SYSTEM COMPLETO** 🚀

**DIFERENCIAL COMPETITIVO**:
✓ Sistema único de submissão e correção científica com IA especializada
✓ Detecção automática de erros médicos comuns (ex: Down vs Dravet)
✓ Workflow completo: Criação → Análise IA → Edição → Submissão → Aprovação
✓ Base científica real integrada (PubMed, ClinicalTrials.gov, ANVISA)
✓ Interface 3D imersiva com avatar médico Dr. Cannabis IA
✓ Sistema de análise cruzada em tempo real

**PARA ROBUSTEZ ADICIONAL** (máximo $3-4 investimento):
→ Integração Supabase para persistência real
→ API externa de reconhecimento de voz (Speech-to-Text)
→ Sistema de notificações push para status de estudos
→ Cache Redis para análises de IA (performance)
→ CDN para assets 3D (velocidade global)

**FUNCIONAMENTO CONFIRMADO v6.0 - DADOS CIENTÍFICOS COMPLETOS EM PORTUGUÊS**:
✅ Planetas removidos - área limpa acima da barra de pesquisa
✅ Cards de sub-pesquisa movidos mais baixo (top: 280px + index * 200px)
✅ Dados científicos traduzidos para português com resultados detalhados
✅ Estudos científicos com protocolos, dosagens e efeitos adversos completos
✅ Avatar lê resultados das pesquisas com TextToSpeech otimizado para conteúdo médico
✅ APIs externas configuradas (PubMed, ClinicalTrials.gov) para atualizações automáticas
✅ Sistema preparado para integração Supabase via DATABASE_URL
✅ Base de dados ampliada com estudos brasileiros e casos clínicos reais
✅ Análise cruzada de dados melhorada com informações científicas detalhadas

**EVOLUÇÃO v3.0 - DR. CANNABIS IA INTERATIVO RESTAURADO**:
✅ Dr. Cannabis IA clicável - ativa todo o sistema ao clicar
✅ Interface de pesquisa aparece apenas quando Dr. IA é ativado
✅ Cards de dados mostram apenas após ativação do Dr. IA
✅ Sub-pesquisas funcionam apenas com Dr. IA ativo
✅ Avatar com hover effect e tooltip explicativo
✅ Layout invertido mantido: Avatar esquerda, Cards direita
✅ Planetas flutuantes organizados verticalmente na esquerda
✅ Fundo transparente integrado ao app real
✅ Sistema completo controlado pelo Dr. Cannabis IA

---

**2025-08-09**: Sistema Completo de Submissão de Estudos Finalizado - NeuroCann Lab v3.0
- ✅ **Dashboard "Meu Estudo" renovado** com 3 abas funcionais (Criar, Editar, Submissões)
- ✅ **Análise automática da IA** que detecta erros comuns (ex: confusão Down/Dravet)
- ✅ **Sistema de edição e correção** quando IA identifica informações incorretas
- ✅ **Submissão para análise profissional** com tracking de status completo
- ✅ **Banco de dados study_submissions** com APIs REST completas
- ✅ **Avatar atualizado** com nova paleta verde (green-500 #22c55e) sem glow excessivo
- ✅ **Dashboard limpo** - removido glow desnecessário do perfil
- ✅ **Integração científica** - validação cruzada com base de dados real

**2025-08-09**: Interface home limpa - dados científicos movidos para dashboard
- ⚠️ CRÍTICO: Apenas dados reais com PMID/NCT verificados (ex: PMID 28538134)
- Home principal limpa focada no Dr. Cannabis IA e consultas médicas
- Cards de estudos/casos removidos da home - pertencem ao dashboard específico
- Dr. Cannabis IA com respostas específicas por consulta médica
- Interface principal focada na experiência de consulta médica
- Dados científicos detalhados acessíveis via navegação específica

**2025-08-09**: Sistema de Revisão Colaborativa Completo e Interface Atualizada
- ✅ **Sistema de revisão colaborativa implementado** com aba "Revisão" no admin
- ✅ **3 tipos de ação administrativa**: Aprovar, Rejeitar ou Solicitar Revisão  
- ✅ **Ciclo de feedback colaborativo**: admin → notas detalhadas → usuário corrige com IA → reenvio
- ✅ **4 estudos de exemplo** em diferentes status incluindo 2 aguardando revisão
- ✅ **Removido "v2.0 BETA"** do cabeçalho conforme solicitado pelo usuário
- ✅ **Adicionado Fórum de Discussão** no cabeçalho com 29 discussões ativas
- ✅ **ForumDashboard completo** com categorias, posts médicos e estatísticas
- ✅ **Interface médica colaborativa** para discussão de casos clínicos e protocolos
- ✅ **Integração Fórum + Meus Estudos**: usuários podem criar discussões baseadas em estudos aprovados
- ✅ **Sistema de anexos**: suporte para PDF, DOC, DOCX, JPG, PNG (máx. 10MB)
- ✅ **Dados científicos reais**: Posts baseados em PMID verificados e alertas regulatórios oficiais
- ✅ **Protocolos médicos atualizados**: Epidiolex, Sativex, RDC ANVISA 660/2022

**2025-08-09**: Removed duplicate VerdiData IA system
- Eliminated confusing dual chat systems that were causing user confusion
- Maintained only the functional "IA Cannabis" chat system
- Simplified codebase by removing redundant card systems and drag functionality
- Cleaner interface focusing on single, effective AI interaction

**2025-08-09**: Implemented sub-search system with lateral cards
- Added sub-search functionality at the end of VerdiData IA analysis
- Sub-search opens purple-themed lateral card on the right side of screen
- Main AI card automatically reduces width when sub-search is active
- Sub-search card is fully functional with same interactive elements as main analysis
- Card can be closed independently while maintaining main analysis
- Input field with Enter key support and dedicated search button
- Smooth animations and transitions between card states

**2025-08-09**: Dashboard do Perfil Profissional Atualizado
- ✅ **Glow neon completamente removido** - substituído por design cinza neutro profissional
- ✅ **Campos médicos específicos**: Especialidade médica com opções (Neurologia, Epileptologia, etc.)
- ✅ **Campos institucionais**: CRM/Registro, Instituição, Experiência com cannabis medicinal
- ✅ **Preferências da plataforma atualizadas**: Dr. Cannabis IA, alertas ANVISA, correção automática
- ✅ **Estatísticas médicas**: Estudos, discussões, aprovações e pendências
- ✅ **Interface profissional**: Cards cinza sem bordas holográficas ou efeitos neon
- ✅ **Atividade recente**: Foco em submissões, fórum e alertas regulatórios

**2025-08-09**: Implemented fully draggable AI response card system
- VerdiData AI card now fully draggable when minimized with smooth movement  
- Card opens below search area instead of top of screen
- Maintains single card instance - new searches update existing card content
- Position limits prevent card from moving outside screen boundaries
- Cursor changes to "move" when dragging minimized card
- Fixed positioning with proper header clearance (64px minimum top)
- Card remembers position when minimized and being moved around screen

**2025-08-08**: Added intelligent AI chat system integrated to search bar
- VerdiData AI responds to questions about scientific studies and clinical cases
- Chat mode toggle with real-time responses based on platform data
- Smart responses about dosages, efficacy, adverse effects, and regulations
- Interface improvements: removed cannabis icon, repositioned planets below search bar

## System Architecture

### Frontend Architecture

**Framework & Build Tool**: React 18 with TypeScript and Vite for fast development and optimized builds. The frontend uses modern React patterns with functional components and hooks.

**UI Framework**: shadcn/ui components built on Radix UI primitives, providing accessible and customizable components. Tailwind CSS handles styling with a custom dark theme featuring cyberpunk-inspired colors and effects.

**3D Graphics**: Three.js integration via @react-three/fiber and @react-three/drei for rendering interactive 3D avatars and holographic effects, creating an immersive user experience.

**State Management**: TanStack Query (React Query) for server state management, caching, and synchronization. Local state handled through React hooks.

**Routing**: Wouter for lightweight client-side routing with support for nested routes and dynamic sections.

### Backend Architecture

**Runtime & Framework**: Node.js with Express.js providing RESTful API endpoints. Uses ES modules throughout for modern JavaScript syntax.

**Development Setup**: Custom Vite integration for hot module replacement in development, with middleware mode for seamless frontend-backend integration.

**API Design**: RESTful endpoints following conventional patterns:
- Scientific studies: `/api/scientific`
- Clinical cases: `/api/clinical` 
- Alerts: `/api/alerts`
- User profiles: `/api/profile`

**Data Storage**: Currently uses in-memory storage (MemStorage class) with interfaces designed to easily swap to database implementations. Schema definitions use Drizzle ORM with Zod validation.

### Database Schema Design

**ORM & Validation**: Drizzle ORM with PostgreSQL dialect configured, though currently using in-memory storage. Zod schemas provide runtime validation and type safety.

**Data Models**:
- Users: Medical professionals with specialties and credentials
- Scientific Studies: Research papers with compounds, indications, and phases
- Clinical Cases: Patient cases with outcomes and doctor associations
- Alerts: Notifications with priority levels and read status

### External Dependencies

**Database**: Neon serverless PostgreSQL configured via Drizzle ORM (DATABASE_URL environment variable required)

**UI Components**: Extensive use of Radix UI primitives for accessibility and Lucide React for icons

**Development Tools**: 
- Replit-specific plugins for runtime error overlay and cartographer
- ESBuild for production builds
- PostCSS with Autoprefixer for CSS processing

**3D Libraries**: Three.js ecosystem including @react-three/fiber for React integration and @react-three/drei for additional 3D utilities

The architecture prioritizes modularity, type safety, and developer experience while maintaining the flexibility to scale into a production medical platform with real database integration and authentication systems.