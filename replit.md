# NeuroCann Lab - Plataforma M√©dica Inteligente

## Overview - Vis√£o Evolutiva do Sistema

NeuroCann Lab √© uma plataforma m√©dica avan√ßada que combina intelig√™ncia artificial, visualiza√ß√£o de dados em tempo real e interface imersiva para an√°lise cient√≠fica de cannabis medicinal. O sistema evoluiu para ser uma ferramenta de pesquisa neural hier√°rquica onde:

**CONCEITO CENTRAL**: Teia neural de conhecimento que conecta estudos cient√≠ficos, casos cl√≠nicos e alertas regulat√≥rios atrav√©s de IA especializada, permitindo explora√ß√£o profunda e descoberta de correla√ß√µes m√©dicas.

**ARQUITETURA DE PESQUISA EVOLUTIVA**:
- **Layer 1**: Pesquisa principal fixa na teia neural (cards est√°ticos)
- **Layer 2**: Sub-pesquisas organizadas em dock inferior expans√≠vel
- **Layer 3**: Sistema de zoom/pan profissional (50%-200%)
- **Layer 4**: IA cruzada analisando 3 bancos simultaneamente

**FUNCIONALIDADE CORE**: Sistema de pesquisa cruzada inteligente que permite ao usu√°rio fazer perguntas em linguagem natural e receber an√°lises integradas de todos os dados cient√≠ficos, com sugest√µes de aprofundamento que geram sub-pesquisas organizadas harmonicamente na interface.

## User Preferences & Evolution Goals

**Communication Style**: Simple, everyday language.

**Platform Evolution Vision**:
- Sistema deve evoluir e aprender continuamente
- An√°lise autom√°tica do app a cada 10 minutos durante desenvolvimento
- Foco na coer√™ncia total do sistema e experi√™ncia harm√¥nica
- Cada funcionalidade deve se integrar naturalmente com as existentes
- Interface deve ser intuitiva: cards principais fixos, sub-pesquisas m√≥veis
- Prioridade: organiza√ß√£o visual harm√¥nica que permite leitura simult√¢nea

## Recent Changes

## AN√ÅLISE EVOLUTIVA DO SISTEMA (An√°lise 1 - 16:30)

**STATUS ATUAL**: Sistema funcionando com arquitetura h√≠brida otimizada

**PONTOS FORTES IDENTIFICADOS**:
‚úì Teia neural fixa proporcionando estabilidade visual
‚úì Dock inferior expans√≠vel criando harmonia organizacional  
‚úì Sistema de pesquisa cruzada IA analisando 3 bancos simultaneamente
‚úì Navega√ß√£o zoom/pan profissional (50%-200%)
‚úì Sub-pesquisas com handles precisos (6x6px) apenas no √≠cone ‚ãÆ‚ãÆ

**OPORTUNIDADES DE EVOLU√á√ÉO DETECTADAS**:
üîÑ Sistema poderia "aprender" padr√µes de pesquisa do usu√°rio
üîÑ Conectividade entre cards poderia ser mais inteligente
üîÑ An√°lise de correla√ß√µes cient√≠ficas em tempo real
üîÑ Cache inteligente de sub-pesquisas relacionadas

**COER√äNCIA ARQUITETURAL**: 
- Frontend: React + Three.js + Interface imersiva ‚úì
- Backend: Express + IA cruzada + 3 bancos dados ‚úì 
- UX: Teia fixa + Dock m√≥vel + Zoom/pan ‚úì
- IA: An√°lise sem√¢ntica + Sugest√µes contextuais ‚úì

**PR√ìXIMA EVOLU√á√ÉO SUGERIDA**: 
Sistema de "mem√≥ria de pesquisa" que correlaciona automaticamente sub-pesquisas baseado no hist√≥rico e cria conex√µes neurais visuais din√¢micas.

**EVOLU√á√ÉO v2.5 - INTERFACE EXPANDIDA E DADOS EXPL√çCITOS**:
‚úÖ Card principal expandido para 480px altura com conte√∫do mais leg√≠vel
‚úÖ Dados da plataforma exibidos explicitamente em grid visual
‚úÖ Text-to-Speech otimizado - leitura limpa sem caracteres especiais
‚úÖ Cards de dados separados (396px) com informa√ß√µes detalhadas
‚úÖ Estrutura neural clara: card principal + 3 cards de dados espec√≠ficos
‚úÖ Hover effects e transi√ß√µes suaves em todos os elementos
‚úÖ Layout responsivo com posicionamento absoluto inteligente
‚úÖ Dados reais das APIs exibidos com formata√ß√£o profissional

**STATUS PARA INVESTIDORES**: 
‚úÖ Plataforma funcional v2.2 Hier√°rquica
‚úÖ Sistema de √°rvore de conhecimento implementado
‚úÖ Fluxo completo: Inser√ß√£o ‚Üí Processamento ‚Üí Conex√µes ‚Üí Aprimoramento
‚úÖ Interface profissional pronta para demo
‚úÖ Documento de apresenta√ß√£o INVESTOR_PRESENTATION.md atualizado

**SISTEMA v3.0 - SUBMISSION SYSTEM COMPLETO** üöÄ

**DIFERENCIAL COMPETITIVO**:
‚úì Sistema √∫nico de submiss√£o e corre√ß√£o cient√≠fica com IA especializada
‚úì Detec√ß√£o autom√°tica de erros m√©dicos comuns (ex: Down vs Dravet)
‚úì Workflow completo: Cria√ß√£o ‚Üí An√°lise IA ‚Üí Edi√ß√£o ‚Üí Submiss√£o ‚Üí Aprova√ß√£o
‚úì Base cient√≠fica real integrada (PubMed, ClinicalTrials.gov, ANVISA)
‚úì Interface 3D imersiva com avatar m√©dico Dr. Cannabis IA
‚úì Sistema de an√°lise cruzada em tempo real

**PARA ROBUSTEZ ADICIONAL** (m√°ximo $3-4 investimento):
‚Üí Integra√ß√£o Supabase para persist√™ncia real
‚Üí API externa de reconhecimento de voz (Speech-to-Text)
‚Üí Sistema de notifica√ß√µes push para status de estudos
‚Üí Cache Redis para an√°lises de IA (performance)
‚Üí CDN para assets 3D (velocidade global)

**FUNCIONAMENTO CONFIRMADO v6.0 - DADOS CIENT√çFICOS COMPLETOS EM PORTUGU√äS**:
‚úÖ Planetas removidos - √°rea limpa acima da barra de pesquisa
‚úÖ Cards de sub-pesquisa movidos mais baixo (top: 280px + index * 200px)
‚úÖ Dados cient√≠ficos traduzidos para portugu√™s com resultados detalhados
‚úÖ Estudos cient√≠ficos com protocolos, dosagens e efeitos adversos completos
‚úÖ Avatar l√™ resultados das pesquisas com TextToSpeech otimizado para conte√∫do m√©dico
‚úÖ APIs externas configuradas (PubMed, ClinicalTrials.gov) para atualiza√ß√µes autom√°ticas
‚úÖ Sistema preparado para integra√ß√£o Supabase via DATABASE_URL
‚úÖ Base de dados ampliada com estudos brasileiros e casos cl√≠nicos reais
‚úÖ An√°lise cruzada de dados melhorada com informa√ß√µes cient√≠ficas detalhadas

**EVOLU√á√ÉO v3.0 - DR. CANNABIS IA INTERATIVO RESTAURADO**:
‚úÖ Dr. Cannabis IA clic√°vel - ativa todo o sistema ao clicar
‚úÖ Interface de pesquisa aparece apenas quando Dr. IA √© ativado
‚úÖ Cards de dados mostram apenas ap√≥s ativa√ß√£o do Dr. IA
‚úÖ Sub-pesquisas funcionam apenas com Dr. IA ativo
‚úÖ Avatar com hover effect e tooltip explicativo
‚úÖ Layout invertido mantido: Avatar esquerda, Cards direita
‚úÖ Planetas flutuantes organizados verticalmente na esquerda
‚úÖ Fundo transparente integrado ao app real
‚úÖ Sistema completo controlado pelo Dr. Cannabis IA

---

**2025-08-09**: Sistema Completo de Submiss√£o de Estudos Finalizado - NeuroCann Lab v3.0
- ‚úÖ **Dashboard "Meu Estudo" renovado** com 3 abas funcionais (Criar, Editar, Submiss√µes)
- ‚úÖ **An√°lise autom√°tica da IA** que detecta erros comuns (ex: confus√£o Down/Dravet)
- ‚úÖ **Sistema de edi√ß√£o e corre√ß√£o** quando IA identifica informa√ß√µes incorretas
- ‚úÖ **Submiss√£o para an√°lise profissional** com tracking de status completo
- ‚úÖ **Banco de dados study_submissions** com APIs REST completas
- ‚úÖ **Avatar atualizado** com nova paleta verde (green-500 #22c55e) sem glow excessivo
- ‚úÖ **Dashboard limpo** - removido glow desnecess√°rio do perfil
- ‚úÖ **Integra√ß√£o cient√≠fica** - valida√ß√£o cruzada com base de dados real

**2025-08-09**: Interface home limpa - dados cient√≠ficos movidos para dashboard
- ‚ö†Ô∏è CR√çTICO: Apenas dados reais com PMID/NCT verificados (ex: PMID 28538134)
- Home principal limpa focada no Dr. Cannabis IA e consultas m√©dicas
- Cards de estudos/casos removidos da home - pertencem ao dashboard espec√≠fico
- Dr. Cannabis IA com respostas espec√≠ficas por consulta m√©dica
- Interface principal focada na experi√™ncia de consulta m√©dica
- Dados cient√≠ficos detalhados acess√≠veis via navega√ß√£o espec√≠fica

**2025-08-09**: Sistema de Revis√£o Colaborativa Completo e Interface Atualizada
- ‚úÖ **Sistema de revis√£o colaborativa implementado** com aba "Revis√£o" no admin
- ‚úÖ **3 tipos de a√ß√£o administrativa**: Aprovar, Rejeitar ou Solicitar Revis√£o  
- ‚úÖ **Ciclo de feedback colaborativo**: admin ‚Üí notas detalhadas ‚Üí usu√°rio corrige com IA ‚Üí reenvio
- ‚úÖ **4 estudos de exemplo** em diferentes status incluindo 2 aguardando revis√£o
- ‚úÖ **Removido "v2.0 BETA"** do cabe√ßalho conforme solicitado pelo usu√°rio
- ‚úÖ **Adicionado F√≥rum de Discuss√£o** no cabe√ßalho com 29 discuss√µes ativas
- ‚úÖ **ForumDashboard completo** com categorias, posts m√©dicos e estat√≠sticas
- ‚úÖ **Interface m√©dica colaborativa** para discuss√£o de casos cl√≠nicos e protocolos
- ‚úÖ **Integra√ß√£o F√≥rum + Meus Estudos**: usu√°rios podem criar discuss√µes baseadas em estudos aprovados
- ‚úÖ **Sistema de anexos**: suporte para PDF, DOC, DOCX, JPG, PNG (m√°x. 10MB)
- ‚úÖ **Dados cient√≠ficos reais**: Posts baseados em PMID verificados e alertas regulat√≥rios oficiais
- ‚úÖ **Protocolos m√©dicos atualizados**: Epidiolex, Sativex, RDC ANVISA 660/2022

**2025-08-09**: Removed duplicate VerdiData IA system
- Eliminated confusing dual chat systems that were causing user confusion
- Maintained only the functional "IA Cannabis" chat system
- Simplified codebase by removing redundant card systems and drag functionality
- Cleaner interface focusing on single, effective AI interaction

**2025-08-09**: Implemented sub-search system with lateral cards
- Added sub-search functionality at the end of VerdiData IA analysis
- Sub-search opens purple-themed lateral card on the right side of screen
- Main AI card automatically reduces width when sub-search is active
- Sub-search card is fully functional with same interactive elements as main analysis
- Card can be closed independently while maintaining main analysis
- Input field with Enter key support and dedicated search button
- Smooth animations and transitions between card states

**2025-08-09**: Dashboard do Perfil Profissional Atualizado
- ‚úÖ **Glow neon completamente removido** - substitu√≠do por design cinza neutro profissional
- ‚úÖ **Campos m√©dicos espec√≠ficos**: Especialidade m√©dica com op√ß√µes (Neurologia, Epileptologia, etc.)
- ‚úÖ **Campos institucionais**: CRM/Registro, Institui√ß√£o, Experi√™ncia com cannabis medicinal
- ‚úÖ **Prefer√™ncias da plataforma atualizadas**: Dr. Cannabis IA, alertas ANVISA, corre√ß√£o autom√°tica
- ‚úÖ **Estat√≠sticas m√©dicas**: Estudos, discuss√µes, aprova√ß√µes e pend√™ncias
- ‚úÖ **Interface profissional**: Cards cinza sem bordas hologr√°ficas ou efeitos neon
- ‚úÖ **Atividade recente**: Foco em submiss√µes, f√≥rum e alertas regulat√≥rios

**2025-08-09**: Implemented fully draggable AI response card system
- VerdiData AI card now fully draggable when minimized with smooth movement  
- Card opens below search area instead of top of screen
- Maintains single card instance - new searches update existing card content
- Position limits prevent card from moving outside screen boundaries
- Cursor changes to "move" when dragging minimized card
- Fixed positioning with proper header clearance (64px minimum top)
- Card remembers position when minimized and being moved around screen

**2025-08-08**: Added intelligent AI chat system integrated to search bar
- VerdiData AI responds to questions about scientific studies and clinical cases
- Chat mode toggle with real-time responses based on platform data
- Smart responses about dosages, efficacy, adverse effects, and regulations
- Interface improvements: removed cannabis icon, repositioned planets below search bar

## System Architecture

### Frontend Architecture

**Framework & Build Tool**: React 18 with TypeScript and Vite for fast development and optimized builds. The frontend uses modern React patterns with functional components and hooks.

**UI Framework**: shadcn/ui components built on Radix UI primitives, providing accessible and customizable components. Tailwind CSS handles styling with a custom dark theme featuring cyberpunk-inspired colors and effects.

**3D Graphics**: Three.js integration via @react-three/fiber and @react-three/drei for rendering interactive 3D avatars and holographic effects, creating an immersive user experience.

**State Management**: TanStack Query (React Query) for server state management, caching, and synchronization. Local state handled through React hooks.

**Routing**: Wouter for lightweight client-side routing with support for nested routes and dynamic sections.

### Backend Architecture

**Runtime & Framework**: Node.js with Express.js providing RESTful API endpoints. Uses ES modules throughout for modern JavaScript syntax.

**Development Setup**: Custom Vite integration for hot module replacement in development, with middleware mode for seamless frontend-backend integration.

**API Design**: RESTful endpoints following conventional patterns:
- Scientific studies: `/api/scientific`
- Clinical cases: `/api/clinical` 
- Alerts: `/api/alerts`
- User profiles: `/api/profile`

**Data Storage**: Currently uses in-memory storage (MemStorage class) with interfaces designed to easily swap to database implementations. Schema definitions use Drizzle ORM with Zod validation.

### Database Schema Design

**ORM & Validation**: Drizzle ORM with PostgreSQL dialect configured, though currently using in-memory storage. Zod schemas provide runtime validation and type safety.

**Data Models**:
- Users: Medical professionals with specialties and credentials
- Scientific Studies: Research papers with compounds, indications, and phases
- Clinical Cases: Patient cases with outcomes and doctor associations
- Alerts: Notifications with priority levels and read status

### External Dependencies

**Database**: Neon serverless PostgreSQL configured via Drizzle ORM (DATABASE_URL environment variable required)

**UI Components**: Extensive use of Radix UI primitives for accessibility and Lucide React for icons

**Development Tools**: 
- Replit-specific plugins for runtime error overlay and cartographer
- ESBuild for production builds
- PostCSS with Autoprefixer for CSS processing

**3D Libraries**: Three.js ecosystem including @react-three/fiber for React integration and @react-three/drei for additional 3D utilities

The architecture prioritizes modularity, type safety, and developer experience while maintaining the flexibility to scale into a production medical platform with real database integration and authentication systems.