# Cannabis Clinical Hub - Plataforma M√©dica Inteligente

## Overview - Vis√£o Evolutiva do Sistema

Cannabis Clinical Hub √© uma plataforma m√©dica avan√ßada que combina intelig√™ncia artificial, visualiza√ß√£o de dados em tempo real e interface imersiva para an√°lise cient√≠fica de cannabis medicinal. O sistema evoluiu para ser uma ferramenta de pesquisa neural hier√°rquica onde:

**CONCEITO CENTRAL**: Teia neural de conhecimento que conecta estudos cient√≠ficos, casos cl√≠nicos e alertas regulat√≥rios atrav√©s de IA especializada, permitindo explora√ß√£o profunda e descoberta de correla√ß√µes m√©dicas.

**ARQUITETURA DE PESQUISA EVOLUTIVA**:
- **Layer 1**: Pesquisa principal fixa na teia neural (cards est√°ticos)
- **Layer 2**: Sub-pesquisas organizadas em dock inferior expans√≠vel
- **Layer 3**: Sistema de zoom/pan profissional (50%-200%)
- **Layer 4**: IA cruzada analisando 3 bancos simultaneamente

**FUNCIONALIDADE CORE**: Sistema de pesquisa cruzada inteligente que permite ao usu√°rio fazer perguntas em linguagem natural e receber an√°lises integradas de todos os dados cient√≠ficos, com sugest√µes de aprofundamento que geram sub-pesquisas organizadas harmonicamente na interface.

## User Preferences & Evolution Goals

**Communication Style**: Simple, everyday language.

**Platform Evolution Vision**:
- Sistema deve evoluir e aprender continuamente
- An√°lise autom√°tica do app a cada 10 minutos durante desenvolvimento
- Foco na coer√™ncia total do sistema e experi√™ncia harm√¥nica
- Cada funcionalidade deve se integrar naturalmente com as existentes
- Interface deve ser intuitiva: cards principais fixos, sub-pesquisas m√≥veis
- Prioridade: organiza√ß√£o visual harm√¥nica que permite leitura simult√¢nea

## Recent Changes

## AN√ÅLISE EVOLUTIVA DO SISTEMA (An√°lise 1 - 16:30)

**STATUS ATUAL**: Sistema funcionando com arquitetura h√≠brida otimizada

**PONTOS FORTES IDENTIFICADOS**:
‚úì Teia neural fixa proporcionando estabilidade visual
‚úì Dock inferior expans√≠vel criando harmonia organizacional  
‚úì Sistema de pesquisa cruzada IA analisando 3 bancos simultaneamente
‚úì Navega√ß√£o zoom/pan profissional (50%-200%)
‚úì Sub-pesquisas com handles precisos (6x6px) apenas no √≠cone ‚ãÆ‚ãÆ

**OPORTUNIDADES DE EVOLU√á√ÉO DETECTADAS**:
üîÑ Sistema poderia "aprender" padr√µes de pesquisa do usu√°rio
üîÑ Conectividade entre cards poderia ser mais inteligente
üîÑ An√°lise de correla√ß√µes cient√≠ficas em tempo real
üîÑ Cache inteligente de sub-pesquisas relacionadas

**COER√äNCIA ARQUITETURAL**: 
- Frontend: React + Three.js + Interface imersiva ‚úì
- Backend: Express + IA cruzada + 3 bancos dados ‚úì 
- UX: Teia fixa + Dock m√≥vel + Zoom/pan ‚úì
- IA: An√°lise sem√¢ntica + Sugest√µes contextuais ‚úì

**PR√ìXIMA EVOLU√á√ÉO SUGERIDA**: 
Sistema de "mem√≥ria de pesquisa" que correlaciona automaticamente sub-pesquisas baseado no hist√≥rico e cria conex√µes neurais visuais din√¢micas.

**EVOLU√á√ÉO v2.5 - INTERFACE EXPANDIDA E DADOS EXPL√çCITOS**:
‚úÖ Card principal expandido para 480px altura com conte√∫do mais leg√≠vel
‚úÖ Dados da plataforma exibidos explicitamente em grid visual
‚úÖ Text-to-Speech otimizado - leitura limpa sem caracteres especiais
‚úÖ Cards de dados separados (396px) com informa√ß√µes detalhadas
‚úÖ Estrutura neural clara: card principal + 3 cards de dados espec√≠ficos
‚úÖ Hover effects e transi√ß√µes suaves em todos os elementos
‚úÖ Layout responsivo com posicionamento absoluto inteligente
‚úÖ Dados reais das APIs exibidos com formata√ß√£o profissional

**STATUS PARA INVESTIDORES**: 
‚úÖ Plataforma funcional v2.2 Hier√°rquica
‚úÖ Sistema de √°rvore de conhecimento implementado
‚úÖ Fluxo completo: Inser√ß√£o ‚Üí Processamento ‚Üí Conex√µes ‚Üí Aprimoramento
‚úÖ Interface profissional pronta para demo
‚úÖ Documento de apresenta√ß√£o INVESTOR_PRESENTATION.md atualizado

**SISTEMA FINALIZADO - READY FOR INVESTMENT PRESENTATION** üöÄ

**FUNCIONAMENTO CONFIRMADO v3.0**:
‚úÖ Dr. Cannabis IA clic√°vel ativa todo sistema de pesquisa
‚úÖ Interface surge apenas ap√≥s clicar no Dr. IA 
‚úÖ Fluxo perfeito: Clique ‚Üí Pesquisa ‚Üí An√°lise ‚Üí Resultados
‚úÖ Layout harmonioso com fundo transparente integrado
‚úÖ Sistema profissional pronto para demonstra√ß√£o

**EVOLU√á√ÉO v3.0 - DR. CANNABIS IA INTERATIVO RESTAURADO**:
‚úÖ Dr. Cannabis IA clic√°vel - ativa todo o sistema ao clicar
‚úÖ Interface de pesquisa aparece apenas quando Dr. IA √© ativado
‚úÖ Cards de dados mostram apenas ap√≥s ativa√ß√£o do Dr. IA
‚úÖ Sub-pesquisas funcionam apenas com Dr. IA ativo
‚úÖ Avatar com hover effect e tooltip explicativo
‚úÖ Layout invertido mantido: Avatar esquerda, Cards direita
‚úÖ Planetas flutuantes organizados verticalmente na esquerda
‚úÖ Fundo transparente integrado ao app real
‚úÖ Sistema completo controlado pelo Dr. Cannabis IA

---

**2025-08-09**: Fixed main cards with harmonious sub-cards dock system
- Cards principais fixos na teia neural para estabilidade e foco na leitura
- Sub-cards organizados em dock inferior harm√¥nico e expans√≠vel
- Sistema de abertura/fechamento individual para cada sub-pesquisa
- Cards m√≥veis horizontalmente no dock com handles espec√≠ficos para arraste
- √Årea de arraste restrita apenas ao √≠cone ‚ãÆ‚ãÆ para controle preciso
- Layout em dock permite visualizar m√∫ltiplas sub-pesquisas simultaneamente
- Interface organizada: teia neural fixa + dock de sub-pesquisas m√≥vel

**2025-08-09**: Removed duplicate VerdiData IA system
- Eliminated confusing dual chat systems that were causing user confusion
- Maintained only the functional "IA Cannabis" chat system
- Simplified codebase by removing redundant card systems and drag functionality
- Cleaner interface focusing on single, effective AI interaction

**2025-08-09**: Implemented sub-search system with lateral cards
- Added sub-search functionality at the end of VerdiData IA analysis
- Sub-search opens purple-themed lateral card on the right side of screen
- Main AI card automatically reduces width when sub-search is active
- Sub-search card is fully functional with same interactive elements as main analysis
- Card can be closed independently while maintaining main analysis
- Input field with Enter key support and dedicated search button
- Smooth animations and transitions between card states

**2025-08-09**: Improved AI response integration approach
- VerdiData AI now displays as integrated content section when expanded
- Only becomes draggable floating card when minimized
- Better space utilization and natural content flow
- Maintains all interactive features and smooth animations

**2025-08-09**: Implemented fully draggable AI response card system
- VerdiData AI card now fully draggable when minimized with smooth movement  
- Card opens below search area instead of top of screen
- Maintains single card instance - new searches update existing card content
- Position limits prevent card from moving outside screen boundaries
- Cursor changes to "move" when dragging minimized card
- Fixed positioning with proper header clearance (64px minimum top)
- Card remembers position when minimized and being moved around screen

**2025-08-08**: Added intelligent AI chat system integrated to search bar
- VerdiData AI responds to questions about scientific studies and clinical cases
- Chat mode toggle with real-time responses based on platform data
- Smart responses about dosages, efficacy, adverse effects, and regulations
- Interface improvements: removed cannabis icon, repositioned planets below search bar

## System Architecture

### Frontend Architecture

**Framework & Build Tool**: React 18 with TypeScript and Vite for fast development and optimized builds. The frontend uses modern React patterns with functional components and hooks.

**UI Framework**: shadcn/ui components built on Radix UI primitives, providing accessible and customizable components. Tailwind CSS handles styling with a custom dark theme featuring cyberpunk-inspired colors and effects.

**3D Graphics**: Three.js integration via @react-three/fiber and @react-three/drei for rendering interactive 3D avatars and holographic effects, creating an immersive user experience.

**State Management**: TanStack Query (React Query) for server state management, caching, and synchronization. Local state handled through React hooks.

**Routing**: Wouter for lightweight client-side routing with support for nested routes and dynamic sections.

### Backend Architecture

**Runtime & Framework**: Node.js with Express.js providing RESTful API endpoints. Uses ES modules throughout for modern JavaScript syntax.

**Development Setup**: Custom Vite integration for hot module replacement in development, with middleware mode for seamless frontend-backend integration.

**API Design**: RESTful endpoints following conventional patterns:
- Scientific studies: `/api/scientific`
- Clinical cases: `/api/clinical` 
- Alerts: `/api/alerts`
- User profiles: `/api/profile`

**Data Storage**: Currently uses in-memory storage (MemStorage class) with interfaces designed to easily swap to database implementations. Schema definitions use Drizzle ORM with Zod validation.

### Database Schema Design

**ORM & Validation**: Drizzle ORM with PostgreSQL dialect configured, though currently using in-memory storage. Zod schemas provide runtime validation and type safety.

**Data Models**:
- Users: Medical professionals with specialties and credentials
- Scientific Studies: Research papers with compounds, indications, and phases
- Clinical Cases: Patient cases with outcomes and doctor associations
- Alerts: Notifications with priority levels and read status

### External Dependencies

**Database**: Neon serverless PostgreSQL configured via Drizzle ORM (DATABASE_URL environment variable required)

**UI Components**: Extensive use of Radix UI primitives for accessibility and Lucide React for icons

**Development Tools**: 
- Replit-specific plugins for runtime error overlay and cartographer
- ESBuild for production builds
- PostCSS with Autoprefixer for CSS processing

**3D Libraries**: Three.js ecosystem including @react-three/fiber for React integration and @react-three/drei for additional 3D utilities

The architecture prioritizes modularity, type safety, and developer experience while maintaining the flexibility to scale into a production medical platform with real database integration and authentication systems.